<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nhoque de Mandioca</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: auto;
      padding: 1em;
      background-color: #fffef5;
    }
    h1 {
      color: #8B4513;
    }
    label {
      font-weight: bold;
    }
    input[type="number"] {
      width: 60px;
      margin-left: 0.5em;
    }
    ul, ol {
      padding-left: 1.5em;
    }
  </style>
</head>
<body>
  <h1>Nhoque de Mandioca</h1>

  <p>
    <label for="porcoes">Porções:</label>
    <input type="number" id="porcoes" value="3" min="1" />
    <span id="porcao-base">(base da receita: 3 porções)</span>
  </p>

  <h2>Ingredientes</h2>
  <ul>
    <li><span class="qtd" data-qtd="1" data-unidade="kg">1</span> kg de mandioca</li>
    <li><span class="qtd" data-qtd="1" data-unidade="">1</span> ovo</li>
    <li><span class="qtd" data-qtd="1" data-unidade="colher (sopa)">1</span> colher (sopa) de margarina</li>
    <li><span class="qtd" data-qtd="2" data-unidade="xícaras">2</span> xícaras de farinha de trigo</li>
    <li><span class="qtd" data-qtd="1" data-unidade="pitada">1</span> pitada de sal</li>
  </ul>

  <h2>Modo de Preparo</h2>
  <ol>
    <li>Descasque a mandioca, corte em pedaços e coloque para cozinhar em água com sal.</li>
    <li>Assim que estiver bem mole, escorra e amasse com amassador de batata.</li>
    <li>Coloque o restante dos ingredientes e amasse bem.</li>
    <li>Coloque a massa sobre a mesa, faça rolinhos e corte.</li>
    <li>Se precisar, coloque um pouquinho de farinha na mesa.</li>
    <li>Leve ao fogo em uma panela com água, um fio de óleo e uma pitada de sal.</li>
    <li>Coloque os nhoques aos poucos. Quando começarem a subir, é só retirar e colocar numa vasilha.</li>
    <li>Usar o molho de sua preferência.</li>
  </ol>

  <script>
    const porcoesInput = document.getElementById('porcoes');
    const porcaoBase = 3;

    // Função para formatar o número (sem casas decimais se for inteiro)
    function formatarQuantidade(valor) {
      return Number.isInteger(valor) ? valor : valor.toFixed(2);
    }

    // Atualiza as quantidades dos ingredientes
    function atualizarIngredientes() {
      let novaPorcao = parseInt(porcoesInput.value);

      if (!novaPorcao || novaPorcao < 1) {
        novaPorcao = 1;
        porcoesInput.value = 1;
      }

      const fator = novaPorcao / porcaoBase;
      document.querySelectorAll('.qtd').forEach(span => {
        const baseQtd = parseFloat(span.dataset.qtd);
        const unidade = span.dataset.unidade;
        const novaQtd = baseQtd * fator;
        span.textContent = `${formatarQuantidade(novaQtd)}`;
        if (unidade) span.textContent += ` ${unidade}`;
      });
    }

    porcoesInput.addEventListener('input', atualizarIngredientes);

    // Inicializa com os valores certos ao carregar
    atualizarIngredientes();
  </script>
</body>
</html>
